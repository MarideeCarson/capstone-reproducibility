/*!CK:3019208826!*//*1460387199,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["WVtNY"]); }

__d('FormMonitor',['Arbiter','ArbiterMixin','DOM','Event','Form','areJSONRepresentationsEqual','mixin'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.form=k;this.clean=true;this.originalState=c('Form').serialize(k);this.saveLegacyMultiRadioButtonsSelectionToMarkStateAsDirty();var l=this.onFormChange.bind(this);c('Event').listen(k,{keyup:l,click:l,paste:l,change:l,submit:this.onFormSubmit.bind(this)});c('Arbiter').subscribe('Form/change',function(m,n){c('DOM').contains(this.form,n.node)&&this.handleChange();}.bind(this));}j.prototype.saveLegacyMultiRadioButtonsSelectionToMarkStateAsDirty=function(){'use strict';var k=c('DOM').scry(this.form,'input[type="radio"]');for(var l=0;l<k.length;l++)if(k[l].hasAttribute('checked')){var m=k[l].getAttribute('name');if(m.indexOf('[]')===m.length-2){m=m.substr(0,m.length-2);var n=k[l].getAttribute('value');if(n!==null&&this.originalState.hasOwnProperty(m)){var o=this.originalState[m],p=false;for(var q=0;q<o.length;q++)if(o[q]===n){p=true;break;}if(!p)o.push(n);}}}};j.prototype.onFormSubmit=function(event){'use strict';this.originalState=c('Form').serialize(this.form);this.clean=true;this.inform('clean');};j.prototype.onFormChange=function(event){'use strict';if(c('DOM').isNodeOfType(event.getTarget(),['input','select','textarea']))this.handleChange();};j.prototype.handleChange=function(){'use strict';this.inform('change');var k=!c('areJSONRepresentationsEqual')(c('Form').serialize(this.form),this.originalState);if(this.clean&&k){this.clean=false;this.inform('dirty');}else if(!this.clean&&!k){this.clean=true;this.inform('clean');}};f.exports=j;},null);
__d('SettingsEditor',['ArbiterMixin','Button','CSS','DOM','FormSubmit','FormMonitor','ScrollAwareDOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){return c('DOM').find(j,'.content');}function i(){}Object.assign(i.prototype,c('ArbiterMixin'),{init:function(j,k,l,m){this.form=j;this.save=k;this.hidePassword=l||false;this.forceSaveEnabled=m||false;this.fm=new (c('FormMonitor'))(j.controller);this.fm.subscribe('change',this.onFormChange.bind(this));this.fm.subscribe('clean',this.onFormClean.bind(this));this.fm.subscribe('dirty',this.onFormDirty.bind(this));this.fm.handleChange();},prepare:function(j,k){this.container=j;k&&c('DOM').setContent(h(j),k);this.inform('init',this);return this;},submit:function(){c('FormSubmit').send(this.form.controller);},onFormChange:function(){if(this.hidePassword)this.setSaveEnabled(true);},onFormClean:function(){if(!this.form.isDirty()&&!this.forceSaveEnabled)this.setSaveEnabled(false);},onFormDirty:function(){this.setSaveEnabled(true);},show:function(){if(this.inform('show',this)!==false){c('CSS').addClass(this.container,'openPanel');var j=c('DOM').scry(this.container,'a.fbSettingsListLink')[0];j&&c('DOM').setAttributes(j,{'aria-expanded':'false'});var k=c('DOM').scry(this.container,'div.content')[0];k&&c('DOM').setAttributes(k,{'aria-expanded':'true'});var l=c('DOM').scry(this.container,'div.content div.fbSettingsEditorLabel')[0];l&&l.focus();return true;}return false;},hide:function(){var j=c('DOM').scry(this.container,'a.fbSettingsListLink')[0];j&&c('DOM').setAttributes(j,{'aria-expanded':'true'});j&&j.focus();if(this.inform('hide',this)!==false){c('ScrollAwareDOM').monitor(this.container,function(){c('CSS').removeClass(this.container,'openPanel');c('DOM').empty(h(this.container));}.bind(this));return true;}return false;},contains:function(j){return c('DOM').contains(this.container,j);},setSaveEnabled:function(j){c('Button').setEnabled(this.save,j);},checkUnsaved:function(){if(this.form){this.form.reset();var j=this.form.checkUnsaved();return j&&!confirm(j);}},showError:function(j,k){var l=this.form.controller;if(k){var m=c('DOM').scry(l,k)[0];if(m){var n=c('DOM').scry(l,'label[for="'+m.id+'"]')[0];n&&c('CSS').addClass(n,'fbSettingsErrorLabel');c('DOM').appendContent(m.parentNode,j);}}else c('DOM').prependContent(l,j);},hideErrors:function(){c('DOM').scry(this.container,'div.fbSettingsError').forEach(c('DOM').remove);c('DOM').scry(this.container,'span.fbSettingsErrorMessage').forEach(c('DOM').remove);c('DOM').scry(this.container,'label.fbSettingsErrorLabel').forEach(function(j){c('CSS').removeClass(j,'fbSettingsErrorLabel');});}});f.exports=i;},null);
__d('SettingsPrivacyEditor',['csx','DOMQuery','Event','Focus','SettingsController','SettingsEditor'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('SettingsEditor'));j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this);this.root=l;var m=c('DOMQuery').find(l,"a._cuh"),n=c('Event').listen(m,'click',function(){n.remove();c('SettingsController').closeEditor();});this.subscribe('show',function(){setTimeout(c('Focus').setWithoutOutline.bind(null,m),0);});}f.exports=k;},null);
__d('legacy:SettingsEditor',['SettingsEditor'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.SettingsEditor=c('SettingsEditor');},3);
__d('legacy:SettingsPanelManager',['SettingsController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.SettingsPanelManager=c('SettingsController');},3);