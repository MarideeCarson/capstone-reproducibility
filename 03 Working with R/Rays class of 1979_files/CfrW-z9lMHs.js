/*!CK:2451271511!*//*1460491830,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dWuo8"]); }

__d("P2PTransferRiskResult",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCESS:"SUCCESS",UNDER_MANUAL_REVIEW:"UNDER_MANUAL_REVIEW",REQUIRE_VERIFICATION:"REQUIRE_VERIFICATION"};},null);
__d('P2PConfirmAmountDialog.react',['fbt','CurrentEnvironment','React','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLoadingMask.react','P2PText.react','emptyFunction'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('CurrentEnvironment').messengerdotcom,k=c('React').createClass({displayName:'P2PConfirmAmountDialog',propTypes:{amount:i.string,currencySymbol:i.string,onCancel:i.func,onConfirm:i.func,receiverName:i.string},getDefaultProps:function(){return {amount:'',currencySymbol:'',onCancel:c('emptyFunction'),onConfirm:c('emptyFunction'),receiverName:i.string};},getInitialState:function(){return {loading:false};},handleCancelClick:function(){this.props.onCancel();},handleConfirmClick:function(){this.setState({loading:true});this.props.onConfirm();},getFormattedAmount:function(){return this.props.currencySymbol+''+this.props.amount;},render:function(){var l=j?350:300;return (c('React').createElement(c('P2PDialog.react'),{behaviors:this.props.behaviors,layerHideOnBlur:false,shown:true,width:l},c('React').createElement(c('P2PDialogTitle.react'),{showCloseButton:false},h._("Confirm Payment")),c('React').createElement(c('P2PDialogBody.react'),null,c('React').createElement(c('P2PText.react'),{type:'primary'},h._("Do you want to pay {recipient name} {amount}?",[h.param('recipient name',this.props.receiverName),h.param('amount',this.getFormattedAmount())]))),c('React').createElement(c('P2PDialogFooter.react'),null,c('React').createElement(c('P2PButton.react'),{label:h._("Cancel"),onClick:this.handleCancelClick,use:'default'}),c('React').createElement(c('P2PButton.react'),{label:h._("Pay"),onClick:this.handleConfirmClick,use:'confirm'})),c('React').createElement(c('P2PLoadingMask.react'),{visible:this.state.loading})));}});f.exports=k;},null);
__d('P2PGroupSendDialog.react',['cx','fbt','CurrentEnvironment','Image.react','immutable','ImmutableObject','MessengerContextualDialog.react','P2PActions','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PText.react','React','ScrollableArea.react','XUIContextualDialog.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PGroupSendDialog',propTypes:{amount:j.string,currency:j.string,flyoutAlignment:j.string,onToggle:j.func.isRequired,openRequestTab:j.bool,p2pEligibilities:j.object,participants:j.instanceOf(c('immutable').List),referrer:j.string,threadID:j.string.isRequired,threadFBID:j.string.isRequired},componentDidMount:function(){if(this.props.amount){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_GROUP_SEND_TRIGGER,{raw_amount:this.props.amount,currency:this.props.currency});}else this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_GROUP_SEND);},log:function(l,m){c('P2PLogger').log(l,babelHelpers['extends']({www_event_flow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_SEND},m));},_handleToggle:function(l){this.props.onToggle(l);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_GROUP_SEND_CANCELLED);},_handleBlur:function(){this._handleToggle(false);},isP2PIneligible:function(l){var m=this.props.p2pEligibilities;return m?m[l.userID]===false:true;},renderParticipantRow:function(l){var m=c('CurrentEnvironment').messengerdotcom,n=m?32:40,o=this.isP2PIneligible(l),p;if(o)p=c('React').createElement(c('P2PText.react'),{className:"_4cof",type:'primary'},i._("Isn't able to receive money right now"));return (c('React').createElement('li',{className:"_4cog"+(o?' '+"_4coh":''),key:l.id,onClick:this.handleGroupThreadClicked.bind(this,l)},c('React').createElement('div',{className:"_4coi"},c('React').createElement(c('Image.react'),{className:"_4coj",height:n,src:l.big_image_src||l.image_src,width:n})),c('React').createElement('div',{className:"_4cok"},c('React').createElement(c('P2PText.react'),{className:"_4col",type:'primary'},l.name),p)));},renderGroupList:function(){return (c('React').createElement(c('ScrollableArea.react'),{height:178},c('React').createElement('ul',null,this.props.participants?this.props.participants.map(this.renderParticipantRow):null)));},handleGroupThreadClicked:function(l){if(this.isP2PIneligible(l))return;this.props.onToggle(false);c('P2PActions').chatSendViewOpened({amount:this.props.amount,openRequestTab:this.props.openRequestTab,referrer:this.props.referrer,threadID:this.props.threadID,groupSendRecipientUserID:l.userID,groupThreadFBID:this.props.threadFBID});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_GROUP_SEND_RECIPIENT_PICKED,{raw_amount:this.props.amount,currency:this.props.currency,object_id:l.userID});},render:function(){var l=c('CurrentEnvironment').messengerdotcom,m=l?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react'),n=l?302:280;return (c('React').createElement(m,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:l?'right':'left',context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:true,width:n,position:'above'},c('React').createElement('div',{className:"_4com"+(l?' '+"_4con":'')},c('React').createElement(c('P2PText.react'),{className:"_4coo",type:'primary',weight:'bold'},i._("Select a person")),this.renderGroupList())));}});f.exports=k;},null);
__d('P2PSendMoneyAmountInput.react',['cx','fbt','CurrentEnvironment','React','ReactDOM','XUIError.react','P2PAmountUtils','emptyFunction'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=1,l=c('React').createClass({displayName:'P2PSendMoneyAmountInput',propTypes:{currencySymbol:j.string,disabled:j.bool,isRequesting:j.bool,onInputChange:j.func,value:j.string},getDefaultProps:function(){return {currencySymbol:'$',disabled:false,isRequesting:false,onInputChange:c('emptyFunction'),value:''};},getInitialState:function(){var m;if(c('CurrentEnvironment').messengerdotcom){m=236;}else m=200;return {inputError:null,maxInputWidth:m,value:this.props.value,width:''};},componentDidMount:function(){this.updateAmount(this.state.value);if(!this.props.disabled)this.initDelayedFocus();},initDelayedFocus:function(){setTimeout(this.focus);},focus:function(){var m,n=this.state.value,o=0;if(this.isMounted()&&this.refs.textInput){m=c('ReactDOM').findDOMNode(this.refs.textInput);m.focus();if(n){o=n.length;m.setSelectionRange(o,o);}}},handleAmountInputChange:function(m){var n=m.target.value;this.clearInputError();this.updateAmount(n);},clearInputError:function(){this.setState({inputError:null});},setInputError:function(m){this.setState({inputError:m});},handleAmountInputBlur:function(m){var n=m.target.value,o=n.split('.'),p=o[0],q=o[1];if(q){if(q.length===1)this.updateAmount(n+'0');}else if(q==='')this.updateAmount(p);},updateAmount:function(m){var n=true,o,p=c('P2PAmountUtils').isAmountOverLegalLimit(m);m=c('P2PAmountUtils').sanitizeAmount(m);o=parseFloat(m);if(p){n=false;this.setInputError(i._("Please enter a smaller amount"));}var q=m.split('.'),r=q[0],s=q[1];if(s!==undefined){m=(r&&parseFloat(r)!==0?r:'0')+'.'+s.substr(0,2);}else if(r)if(parseFloat(r)===0){m='0';}else if(r.length>1&&r[0]==='0')m=m.substr(1,m.length);this.setValue(m);o=parseFloat(m);n=n&&!isNaN(o)&&o>0;this.props.onInputChange(m,n);},setValue:function(m){this.setState({value:m},this.updateWidth);},updateWidth:function(){var m=this.getMockWidth();if(m)this.setState({width:Math.min(m,this.state.maxInputWidth)});},getMockWidth:function(){var m=c('ReactDOM').findDOMNode(this.refs.mock_input);return m.offsetWidth+k;},render:function(){var m,n=!this.state.value.length,o,p;if(n)m=c('React').createElement('div',{ref:'placeholder_input',className:"_1-sv"},'0');return (c('React').createElement('div',{className:"_ipw"+(this.props.isRequesting?' '+"_1c9h":'')},c('React').createElement('label',null,p,c('React').createElement('div',{className:"_4puh"+(n?' '+"_1-sy":'')},o,m,c('React').createElement('div',{ref:'mock_input',className:"_5fbs"},this.state.value),c('React').createElement(c('XUIError.react'),{xuiError:this.state.inputError},c('React').createElement('span',{className:"_1-sz"},c('React').createElement('input',{autofocus:true,className:"_5fbv",disabled:this.props.disabled,onBlur:this.handleAmountInputBlur,onChange:this.handleAmountInputChange,ref:'textInput',style:{width:this.state.width},value:this.state.value})))))));}});f.exports=l;},null);
__d('P2PSendMoneyDialog.react',['cx','fbt','Arbiter','CreditCardFormParam','CurrentEnvironment','Image.react','ImageBlock.react','Link.react','MessengerContextualDialog.react','P2PAPI','P2PAddCreditCardDialog.react','P2PButton.react','P2PBigAmount.react','P2PCreditCardStore','P2PChooseCreditCardForm.react','P2PConfirmAmountDialog.react','P2PCreditCard','P2PDialog.react','P2PDialogTitle.react','P2PEditCreditCardDialog.react','P2PGKValues','P2PLinkConstants','P2PLoadingMask.react','P2PLogger','P2PMemoField.react','P2PMemoText.react','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PSendMoneyAmountInput.react','P2PSendMoneyDialogActionHeader.react','P2PText.react','P2PVerifyCreditCardDialog.react','PaymentSettingsStringUtils','React','ReactLayeredComponentMixin','XUIContextualDialog.react','XUISpinner.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('CurrentEnvironment').messengerdotcom,l=c('P2PGKValues').P2PRequestMoneyEnabled,m=i._("Change"),n=i._("Add Debit Card"),o=100,p=c('React').createClass({displayName:'P2PSendMoneyDialog',mixins:[c('ReactLayeredComponentMixin')],propTypes:{amount:j.string,currency:j.string.isRequired,currencySymbol:j.string.isRequired,groupThreadFBID:j.string,flyoutAlignment:j.string,openRequestTab:j.bool,memoText:j.string,onError:j.func.isRequired,onPaymentRequestError:j.func.isRequired,onPaymentRequestSuccess:j.func.isRequired,onSendSuccess:j.func.isRequired,onToggle:j.func.isRequired,platformData:j.object,receiver:j.object,referrer:j.string,paymentRequestID:j.string,p2pEligibilities:j.object,useModal:j.bool},getDefaultProps:function(){return {amount:'',openRequestTab:false,receiver:{},useModal:false};},getInitialState:function(){var q=c('P2PCreditCardStore').getAll();return {asyncRequestState:c('P2PCreditCardStore').getAsyncRequestState(),addCreditCardDialogShown:false,amount:this.props.amount,creditCardsFetchError:c('P2PCreditCardStore').failedCreditCardFetch(),creditCards:q,confirmAmountDialogShown:false,isAmountValid:!!this.props.paymentRequestID,isCreditCardsFetchComplete:c('P2PCreditCardStore').isCreditCardsFetchComplete(),isMemoPhotoUploading:false,isPaying:!this.props.openRequestTab,isRequesting:this.props.openRequestTab,loading:false,memoText:this.props.memoText,memoPhotoIDs:[],selectedCard:q[0],showChooseCreditCardForm:false,verifyCreditCardDialogShown:false};},creditCardStoreSub:null,_isAmountVerified:false,passwordCancelSubscribeToken:null,getEventFlow:function(){return (this.props.paymentRequestID||this.isRequesting()?c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_REQUEST:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_SEND);},log:function(q,r){c('P2PLogger').log(q,babelHelpers['extends']({www_event_flow:this.getEventFlow(),object_id:this.props.receiver&&this.props.receiver.userID,memo_text:this.state.memoText,request_id:this.props.paymentRequestID},this.getPlatformLoggingData(),r,this.getReferrer()));},componentWillUnmount:function(){if(this.passwordCancelSubscribeToken!==null){c('Arbiter').unsubscribe(this.passwordCancelSubscribeToken);this.passwordCancelSubscribeToken=null;}if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},componentWillMount:function(){this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_SEND);if(c('P2PGKValues').P2PDisabledReason){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_P2P_SENDER_DISABLED_SHOWN);}else if(this.isRecipientIneligible())this.log(c('P2PPaymentLoggerEvent').UI_ACTN_P2P_RECIPIENT_INELIGIBLE_SHOWN);},getPlatformLoggingData:function(){var q=this.props.platformData&&this.props.platformData.loggingData;if(q)return {platform_logging_data:q};return null;},getReferrer:function(){var q=this.props.referrer;if(q)return {www_event_referrer:q};return null;},onAmountInputChange:function(q,r){this.setState({amount:q,isAmountValid:r});},onCreditCardStoreChange:function(){var q=c('P2PCreditCardStore').getAll(),r;if(this.state.selectedCard)r=q.filter(function(s){return (s.getCredentialId()===this.state.selectedCard.getCredentialId());}.bind(this))[0];if(!r)r=q[0];this.setState({asyncRequestState:c('P2PCreditCardStore').getAsyncRequestState(),creditCards:q,isCreditCardsFetchComplete:c('P2PCreditCardStore').isCreditCardsFetchComplete(),selectedCard:r,creditCardsFetchError:c('P2PCreditCardStore').failedCreditCardFetch()});},shouldShowConfirmAmountDialog:function(){var q=this.state.amount,r=q?q.replace(/\,/g,''):'',s=parseFloat(r);return (!this._isAmountVerified&&s>=o);},shouldShowVerifyCreditCardDialog:function(){return !this.state.selectedCard.getIsVerified();},shouldShowEditCreditCardDialog:function(){return this.state.selectedCard.isExpired();},handleSendClick:function(q){if(this.isSendButtonDisabled())return false;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_CLICKED,{raw_amount:this.state.amount,currency:this.props.currency});this._isAmountVerified=false;this.initiatePayment();},handleRequestClick:function(q){if(this.isRequestButtonDisabled())return false;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_REQUEST_CLICKED,{raw_amount:this.state.amount,currency:this.props.currency});this.createPaymentRequest();},initiatePayment:function(){if(this.shouldShowConfirmAmountDialog()){this.hideAllDialogs();this.setState({confirmAmountDialogShown:true});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_AMOUNT,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowEditCreditCardDialog()){this.hideAllDialogs();this.setState({editCreditCardDialogShown:true});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_EDIT_CARD,{raw_amount:this.state.amount,currency:this.props.currency});return;}else if(this.shouldShowVerifyCreditCardDialog()){this.hideAllDialogs();this.setState({verifyCreditCardDialogShown:true});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_VERIFY_CSC,{raw_amount:this.state.amount,currency:this.props.currency});return;}this.createTransaction();},isPayingForRequest:function(){return !!this.props.paymentRequestID;},isPaying:function(){return this.state.isPaying===true;},isRequesting:function(){return this.state.isRequesting===true;},shouldShowLoading:function(){return (!this.state.addCreditCardDialogShown&&!this.state.confirmAmountDialogShown&&!this.state.verifyCreditCardDialogShown&&!this.state.editCreditCardDialogShown);},createTransaction:function(){var q={};this.setState({loading:this.shouldShowLoading()});q[c('CreditCardFormParam').CREDENTIAL_ID]=this.state.selectedCard.getCredentialId();q.amount=this.state.amount;q.receiverId=this.props.receiver&&this.props.receiver.userID;q.memoText=this.state.memoText;q.memoPhotoIDs=this.state.memoPhotoIDs;q.paymentRequestID=this.props.paymentRequestID;if(this.props.groupThreadFBID)q.group_thread_fbid=this.props.groupThreadFBID;if(this.props.platformData)q.platform_context_id=this.props.platformData.platformContextID;this.passwordCancelSubscribeToken=c('Arbiter').subscribeOnce('PasswordReauthDialogCancelClick',this.handlePasswordReauthDialogCancelClick);c('P2PAPI').createTransaction({formData:q,error:this.setCreateTransferError,success:this.setCreateTransferSuccess});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_SEND,{raw_amount:this.state.amount,currency:this.props.currency});},createPaymentRequest:function(){this.setState({loading:this.shouldShowLoading()});var q=this.props.platformData&&this.props.platformData.platformContextID;c('P2PAPI').createPaymentRequest({formData:{amount:this.state.amount,memoText:this.state.memoText,group_thread_fbid:this.props.groupThreadFBID,requesteeID:this.props.receiver&&this.props.receiver.userID,platform_context_id:q},error:this.setCreatePaymentRequestError,success:this.setCreatePaymentRequestSuccess});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CONFIRM_REQUEST,{raw_amount:this.state.amount,currency:this.props.currency});},hideAllDialogs:function(){this.setState({addCreditCardDialogShown:false,confirmAmountDialogShown:false,verifyCreditCardDialogShown:false,editCreditCardDialogShown:false});},isDialogShowing:function(){return !!(this.state.addCreditCardDialogShown||this.state.confirmAmountDialogShown||this.state.verifyCreditCardDialogShown||this.state.editCreditCardDialogShown);},setCreateTransferError:function(q){if(this.isMounted()){this.hideAllDialogs();this.setState({loading:false});}this.props.onError(q);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_FAIL);},setCreateTransferSuccess:function(q){if(this.isMounted()){this.setState({loading:false});this.hideAllDialogs();}this.props.onSendSuccess(q);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_SUCCESS);},setCreatePaymentRequestError:function(q){if(this.isMounted()){this.hideAllDialogs();this.setState({loading:false});}this.props.onPaymentRequestError(q.error);this.log(c('P2PPaymentLoggerEvent').UI_ACTN_REQUEST_FAIL);},setCreatePaymentRequestSuccess:function(q){if(this.isMounted()){this.setState({loading:false});this.hideAllDialogs();}this.props.onPaymentRequestSuccess();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_REQUEST_SUCCESS,{request_id:q.id});},handlePasswordReauthDialogCancelClick:function(){this.passwordCancelSubscribeToken=null;this.setState({loading:false});this.hideAllDialogs();},onAddCreditCardCancel:function(){this.setState({addCreditCardDialogShown:false});},onAddCreditCardSuccess:function(q){var r=this.state.creditCards.filter(function(s){var t=s.getCredentialId();return (q[c('CreditCardFormParam').CREDENTIAL_ID]===t);})[0];this.setState({selectedCard:r});if(this.state.isAmountValid){this.initiatePayment();}else{this.setState({addCreditCardDialogShown:false});this.focusAmountInput();}},onEditCreditCardSuccess:function(){this.initiatePayment();},onEditCreditCardCancel:function(){this.setState({editCreditCardDialogShown:false});},focusAmountInput:function(){if(this.refs.send_money_amount_input)this.refs.send_money_amount_input.focus();},_handleToggle:function(q){this.props.onToggle(q);if(!this.state.loading)this.log(c('P2PPaymentLoggerEvent').UI_ACTN_SEND_MONEY_CANCELLED);},_handleBlur:function(){this._handleToggle(false);},handleAddCreditCardClick:function(){this.setState({addCreditCardDialogShown:true,showChooseCreditCardForm:false});this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHANGE_CARD);},handleBackClick:function(){this.setState({showChooseCreditCardForm:false},function(){this.focusAmountInput();}.bind(this));},handleChooseCardNextClick:function(){var q=this.refs.choose_credit_card_form.getSelectedCard();this.setState({selectedCard:q,showChooseCreditCardForm:false},function(){this.focusAmountInput();}.bind(this));},handleAddCardNextClick:function(){this.setState({addCreditCardDialogShown:true});},handleChangeSelectedCardClick:function(){var q={};if(this.state.creditCards.length===1){q.addCreditCardDialogShown=true;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_CHANGE_CARD);}else{q.showChooseCreditCardForm=true;this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_CHOOSE_CARD);}this.setState(q);},onConfirmAmountCancel:function(){this.setState({confirmAmountDialogShown:false});},onConfirmAmountSuccess:function(){this._isAmountVerified=true;this.initiatePayment();},onVerifyCreditCardSuccess:function(){this.initiatePayment();},onVerifyCreditCardCancel:function(){this.setState({verifyCreditCardDialogShown:false});},handleMemoTextChange:function(q){this.setState({memoText:q});},handleMemoPhotoChange:function(q){this.setState({memoPhotoIDs:q});},handleMemoPhotoUploadingChange:function(q){this.setState({isMemoPhotoUploading:q});},isSendButtonDisabled:function(){return (!this.state.isAmountValid||!this.state.creditCards.length||this.state.loading||this.state.isMemoPhotoUploading);},isRequestButtonDisabled:function(){return !this.state.isAmountValid||this.state.loading;},isAddCardNextButtonDisabled:function(){return !this.state.isAmountValid;},renderAddDebitCardLink:function(){return (c('React').createElement(c('P2PText.react'),{className:"_42h3",type:'secondary',ref:'send_money_dialog_add_card_text'},c('React').createElement(c('Link.react'),{className:"_49nm",href:'#',onClick:this.handleAddCreditCardClick},n)));},renderSelectedCard:function(){var q=this.state.selectedCard;return (c('React').createElement(c('P2PText.react'),{className:"_21x5",size:'small',type:'primary'},c('React').createElement('div',{className:"_49nn"},q.getName()),c('React').createElement('div',{className:"_21wx"},q.getCreditCardNumberFormatted()),c('React').createElement('div',{className:"_21ww"},'\u00b7'),c('React').createElement(c('Link.react'),{className:"_21wy",onClick:this.handleChangeSelectedCardClick,href:'#'},m)));},renderFormButtons:function(){var q,r=k&&this.props.useModal?c('React').createElement(c('P2PButton.react'),{label:i._("Cancel"),onClick:function(){this._handleToggle(false);}.bind(this),type:'secondary'}):null;if(this.isRequesting()){q=c('React').createElement('div',null,r,this.renderRequestButton());}else if(!this.state.creditCards.length){q=c('React').createElement('div',null,r,this.renderAddCardNextButton());}else if(this.state.showChooseCreditCardForm){q=c('React').createElement('div',null,this.renderChooseCardBackButton(),this.renderChooseCardNextButton());}else q=c('React').createElement('div',null,r,this.renderPayButton());return q;},renderChooseCardBackButton:function(){return (c('React').createElement(c('P2PButton.react'),{label:i._("Back"),onClick:this.handleBackClick,ref:'back_button',size:'medium',type:'secondary',use:'default'}));},renderAddCardNextButton:function(){return (c('React').createElement(c('P2PButton.react'),{disabled:this.isAddCardNextButtonDisabled(),label:i._("Next"),onClick:this.handleAddCardNextClick,ref:'add_card_next_button',size:'medium',type:'primary',use:'default'}));},renderChooseCardNextButton:function(){return (c('React').createElement(c('P2PButton.react'),{label:i._("Next"),onClick:this.handleChooseCardNextClick,ref:'choose_card_next_button',size:'medium',type:'primary',use:'confirm'}));},renderPayButton:function(){return (c('React').createElement(c('P2PButton.react'),{disabled:this.isSendButtonDisabled(),label:i._("Pay"),onClick:this.handleSendClick,ref:'send_button',size:'medium',type:'primary',use:'confirm'}));},renderRequestButton:function(){return (c('React').createElement(c('P2PButton.react'),{disabled:this.isRequestButtonDisabled(),label:i._("Request"),onClick:this.handleRequestClick,ref:'request_button',size:'medium',type:'primary',use:'confirm'}));},renderPaymentDetails:function(){var q;if(this.isRequesting())return null;if(this.state.creditCards.length){if(this.state.showChooseCreditCardForm){q=this.renderAddDebitCardLink();}else q=this.renderSelectedCard();}else if(this.state.creditCardsFetchError){q=c('React').createElement('div',{className:"_2abl"},c('React').createElement(c('P2PText.react'),{type:'secondary',ref:'send_money_dialog_add_card_next_text'},i._("Sorry, we couldn't fetch your details. Please check your internet connection or refresh this page and try again.")));}else q=c('React').createElement('div',{className:"_2abl"},c('React').createElement(c('P2PText.react'),{type:'secondary',ref:'send_money_dialog_add_card_next_text'},i._("Sending money is free and secure")));return q;},isRecipientIneligible:function(){var q=this.props.receiver;return !!(q&&this.props.p2pEligibilities&&this.props.p2pEligibilities[q.userID]===false);},isDialogDisabled:function(){return !!(c('P2PGKValues').P2PDisabledReason||this.isRecipientIneligible());},renderDisabledText:function(){if(!this.isDialogDisabled())return null;var q=c('P2PGKValues').P2PDisabledReason;if(q)return c('PaymentSettingsStringUtils').getP2PDisabledText(q);if(this.isRecipientIneligible()){var r=this.props.receiver,s=r?r.short_name:'';return i._("{receiverName} isn't able to receive money right now. {Learn more about p2p link}",[i.param('receiverName',s),i.param('Learn more about p2p link',c('React').createElement(c('Link.react'),{href:c('P2PLinkConstants').receiverIneligibleHelpURI,target:'_blank'},i._("Learn More.")))]);}return c('PaymentSettingsStringUtils').getGeneralP2PDisabledText();},renderFooter:function(){var q;if(this.isDialogDisabled()){q=c('React').createElement(c('P2PText.react'),{className:"_2pi8",type:'secondary'},this.renderDisabledText());}else if(!this.state.isCreditCardsFetchComplete){q=c('React').createElement('div',{className:"_2-vg"},c('React').createElement(c('XUISpinner.react'),{className:"_2-vh"}));}else q=[c('React').createElement('div',{className:"_21x4",key:'paymentDetails'},this.renderPaymentDetails()),c('React').createElement('div',{className:"_4zf-",key:'formButtons'},this.renderFormButtons())];return (c('React').createElement('div',{className:"_5p-k"},q));},renderMemo:function(){var q=this.isPayingForRequest(),r=this.props.memoText||this.state.memoText;if(q&&!r)return null;if(q&&r)return (c('React').createElement('div',{className:"_5exl"},c('React').createElement(c('P2PMemoText.react'),{memoText:r})));return (c('React').createElement('div',{className:"_5exl"},c('React').createElement(c('P2PMemoField.react'),{defaultValue:r,disabled:this.isDialogDisabled(),isRequesting:this.isRequesting(),onTextChange:this.handleMemoTextChange,onPhotoChange:this.handleMemoPhotoChange,onPhotoUploadingChange:this.handleMemoPhotoUploadingChange})));},renderSendMoneyForm:function(){var q=k?32:40,r=i._("Send to");if(this.isRequesting())r=i._("Request to");return (c('React').createElement('div',null,c('React').createElement('div',{className:"_49no",ref:'send_money_dialog_title'},c('React').createElement(c('ImageBlock.react'),{spacing:'large'},c('React').createElement(c('Image.react'),{className:"_5p-i",height:q,src:this.props.receiver&&(this.props.receiver.big_image_src||this.props.receiver.image_src),width:q}),c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('P2PText.react'),{type:'secondary'},r),c('React').createElement(c('P2PText.react'),{className:"_5p-j",size:'small',type:'primary',weight:'bold'},this.props.receiver&&this.props.receiver.name))),c('React').createElement(c('Link.react'),{className:"_49np",href:c('P2PLinkConstants').helpCenterURI,target:'_blank'})),c('React').createElement('div',{className:"_2abm"},this.renderMainContainer()),this.renderMemo(),c('React').createElement('div',{className:"_21w-"+(this.isDialogDisabled()?' '+"_3orf":'')+(k?' '+"_4eb_":'')},this.renderFooter())));},renderMainContainer:function(){var q,r,s=this.state.amount,t=this.isPayingForRequest();if(this.state.showChooseCreditCardForm){q=c('React').createElement('div',{className:"_xn7"},c('React').createElement(c('P2PChooseCreditCardForm.react'),{creditCards:this.state.creditCards,selectedCard:this.state.selectedCard,ref:'choose_credit_card_form'}));}else{if(!t){r=c('React').createElement(c('P2PSendMoneyAmountInput.react'),{currencySymbol:this.props.currencySymbol,disabled:this.isPayingForRequest()||this.isDialogDisabled(),isRequesting:this.isRequesting(),onInputChange:this.onAmountInputChange,ref:'send_money_amount_input',value:s});}else r=c('React').createElement(c('P2PBigAmount.react'),{amount:s,size:'large'});q=c('React').createElement('div',{className:"_2abn"+(t?' '+"_74p":'')},r);}return q;},renderActionToggleHeader:function(){var q=this.isPaying(),r=this.isRequesting();if(this.isPayingForRequest()||!l)return null;return (c('React').createElement('div',{className:"_4uvi"},c('React').createElement(c('P2PSendMoneyDialogActionHeader.react'),{isPaying:q,isRequesting:r,onPayClick:function(){if(!this.isPaying())this.setState({isPaying:true,isRequesting:false},function(){this.focusAmountInput();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_SEND);}.bind(this));}.bind(this),onRequestClick:function(){if(!this.isRequesting())this.setState({isPaying:false,isRequesting:true},function(){this.focusAmountInput();this.log(c('P2PPaymentLoggerEvent').UI_ACTN_INITIATE_REQUEST);}.bind(this));}.bind(this)})));},renderLayers:function(){var q={},r,s,t=this.props.receiver&&this.props.receiver.short_name,u;if(this.props.useModal)u={LayerFadeOnShow:false};if(this.state.addCreditCardDialogShown){if(this.state.isAmountValid){s=i._("Please enter a debit card to send {Amount} to {Recipient name}. Credit cards can't be used.",[i.param('Amount',this.props.currencySymbol+this.state.amount),i.param('Recipient name',t)]);r=i._("Pay");}q.addCreditCard=c('React').createElement(c('P2PAddCreditCardDialog.react'),{behaviors:u,eventFlow:this.getEventFlow(),loggingData:this.getPlatformLoggingData(),onCancel:this.onAddCreditCardCancel,onSuccess:this.onAddCreditCardSuccess,ref:'send_money_dialog_add_credit_card_form',saveButtonText:r,showCancelButton:!!k,text:s});}else if(this.state.confirmAmountDialogShown){q.confirmAmount=c('React').createElement(c('P2PConfirmAmountDialog.react'),{amount:this.state.amount,behaviors:u,currencySymbol:this.props.currencySymbol,onCancel:this.onConfirmAmountCancel,onConfirm:this.onConfirmAmountSuccess,receiverName:t});}else if(this.state.verifyCreditCardDialogShown){q.verifyCreditCard=c('React').createElement(c('P2PVerifyCreditCardDialog.react'),{asyncRequestState:this.state.asyncRequestState,behaviors:u,creditCard:this.state.selectedCard,isSending:true,onCancel:this.onVerifyCreditCardCancel,onSuccess:this.onVerifyCreditCardSuccess});}else if(this.state.editCreditCardDialogShown)q.confirmAmount=c('React').createElement(c('P2PEditCreditCardDialog.react'),{asyncRequestState:this.state.asyncRequestState,behaviors:u,creditCard:this.state.selectedCard,onCancel:this.onEditCreditCardCancel,onSuccess:this.onEditCreditCardSuccess});return q;},renderIneligibleMask:function(){if(!this.isDialogDisabled())return null;return c('React').createElement('div',{className:"_3org"});},render:function(){var q,r=null,s={},t=k?286:260;if(this.props.useModal&&this.isDialogShowing())return null;if(this.props.useModal){q=c('P2PDialog.react');r=c('React').createElement(c('P2PDialogTitle.react'),{className:"_30wi"},i._("Confirm Payment"));s={layerHideOnBlur:false};t=k?380:312;}else{q=k?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react');s={alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:k?'right':'left',context:this.props.context,position:this.props.position||'above',onBlur:this._handleBlur};}return (c('React').createElement(q,babelHelpers['extends']({onToggle:this._handleToggle,shown:true,width:t},s),c('React').createElement('div',{className:"_21x9"+(k?' '+"_1pka":'')+(l?' '+"_4uvl":'')+(this.props.useModal?' '+"_35wt":'')},r,this.renderActionToggleHeader(),this.renderSendMoneyForm(),this.renderIneligibleMask(),c('React').createElement(c('P2PLoadingMask.react'),{ref:'send_money_dialog_loader',visible:this.state.loading}))));}});f.exports=p;},null);